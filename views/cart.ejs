<!DOCTYPE html>
<html lang="en">

<head>
  <% include partials/head %> 
  
</head>
<body>
  <% include partials/topbar %>
  <% include partials/menu %>

  <main id="main">

    <!-- ======= About Us Section ======= -->
    <section id="about" class="about">
      <div data-action='Product-Show' class="container">
        <div class="row">
          <div class="col-lg-12 p-5 bg-white rounded shadow-sm mb-5">
  
            <!-- Shopping cart table -->
            <div class="table-responsive">
              <table class="table" id="cartTable">
                <thead>
                  <tr>
                    <th scope="col" class="border-0 bg-light">
                      <div class="p-2 px-3 text-uppercase">Product</div>
                    </th>
                    <th scope="col" class="border-0 bg-light">
                      <div class="py-2 text-uppercase">Price</div>
                    </th>
                    <th scope="col" class="border-0 bg-light">
                      <div class="py-2 text-uppercase">Quantity</div>
                    </th>
                    <th scope="col" class="border-0 bg-light">
                      <div class="py-2 text-uppercase">Remove</div>
                    </th>
                  </tr>
                </thead>
                <tbody>
                  
                </tbody>
              </table>
            </div>
          </div>
        </div>        
      </div>
    </section><!-- End About Us Section -->
  </main><!-- End #main -->

  <!-- ======= Footer ======= -->
  <footer id="footer">
    <div class="footer-top">
      <div class="container">
        <div class="row">

          <div class="col-lg-3 col-md-6 footer-info">
            <h3>Badger Equipment</h3>
            <p>
              415 Mission St. <br>
              CA 91572, USA<br><br>
              <strong>Phone:</strong> +1 5589 55488 55<br>
              <strong>Email:</strong> info@badgerequipment.com<br>
            </p>
            <div class="social-links mt-3">
              <a href="#" class="twitter"><i class="bx bxl-twitter"></i></a>
              <a href="#" class="facebook"><i class="bx bxl-facebook"></i></a>
              <a href="#" class="instagram"><i class="bx bxl-instagram"></i></a>
              <a href="#" class="google-plus"><i class="bx bxl-skype"></i></a>
              <a href="#" class="linkedin"><i class="bx bxl-linkedin"></i></a>
            </div>
          </div>

          <div class="col-lg-2 col-md-6 footer-links">
            <h4>Useful Links</h4>
            <ul>
              <li><i class="bx bx-chevron-right"></i> <a href="#">Home</a></li>
              <li><i class="bx bx-chevron-right"></i> <a href="#">About us</a></li>
              <li><i class="bx bx-chevron-right"></i> <a href="#">Services</a></li>
              <li><i class="bx bx-chevron-right"></i> <a href="#">Terms of service</a></li>
              <li><i class="bx bx-chevron-right"></i> <a href="#">Privacy policy</a></li>
            </ul>
          </div>

          <div class="col-lg-3 col-md-6 footer-links">
            <h4>Our Services</h4>
            <ul>
              <li><i class="bx bx-chevron-right"></i> <a href="#">Planning</a></li>
              <li><i class="bx bx-chevron-right"></i> <a href="#">Warranty</a></li>
              <li><i class="bx bx-chevron-right"></i> <a href="#">Maintenacne</a></li>              
            </ul>
          </div>

          <div class="col-lg-4 col-md-6 footer-newsletter">
            <h4>Our Newsletter</h4>
            <p>Would you like to stay updated on Badger products & announcements? Provide your email address below to subscribe.</p>
            <form action="" method="post">
              <input type="email" name="email"><input type="submit" value="Subscribe">
            </form>

          </div>

        </div>
      </div>
    </div>

    
  </footer><!-- End Footer -->

  <a href="#" class="back-to-top"><i class="icofont-simple-up"></i></a>

  <!-- Vendor JS Files -->
  <script src="/assets/vendor/jquery/jquery.min.js"></script>
  <script src="/assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="/assets/vendor/jquery.easing/jquery.easing.min.js"></script>
  <script src="/assets/vendor/php-email-form/validate.js"></script>
  <script src="/assets/vendor/jquery-sticky/jquery.sticky.js"></script>
  <script src="/assets/vendor/venobox/venobox.min.js"></script>
  <script src="/assets/vendor/waypoints/jquery.waypoints.min.js"></script>
  <script src="/assets/vendor/counterup/counterup.min.js"></script>
  <script src="/assets/vendor/owl.carousel/owl.carousel.min.js"></script>
  <script src="/assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="/assets/vendor/aos/aos.js"></script>

  <!-- Template Main JS File -->
  <script src="/assets/js/main.js"></script>
<script type="text/javascript">
  $(document).ready(function() { 
  var cart = loadCart();
    var html = "";
    

    cart.items.forEach(item =>{
      $("#cartTable").find('tbody').append(`<tr>
        <th scope="row" class="border-0">
          <div class="p-2">
            <img src="${item.img}" alt="" width="70" class="img-fluid rounded shadow-sm">
            <div class="ml-3 d-inline-block align-middle">
              <h5 class="mb-0"> <a href="/productDetail/${item.itemID}" class="text-dark d-inline-block align-middle">${item.itemName}</a></h5><span class="text-muted font-weight-normal font-italic d-block">Category: ${item.category}</span>
            </div>
          </div>
        </th>
        <td class="border-0 align-middle"><strong>$${item.itemPrice}</strong></td>
        <td class="border-0 align-middle"><strong>${item.quantity}</strong></td>
        <td class="border-0 align-middle"><a class="cartRemove" itemID="${item.itemID}" class="text-dark">remove</a></td>
      </tr>`);
    })
    

    $(document).on("click", ".cartRemove", function(){
      var that = $(this)
      var lcart = JSON.parse(localStorage.getItem("cart"));            
      lcart.items.forEach(function(item, index){        
        console.log(item.itemID + " --- " + that.attr("itemID"))
        if(item.itemID == $(this).attr("itemID")){
          alert("match")
          lcart.items.splice(index, 1);          
        }
      })
      console.log(lcart);
      localStorage.setItem("cart", JSON.stringify(lcart));
      //location.reload();
    })
  });
    
  </script>  
</body>

</html>